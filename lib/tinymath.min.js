/*
tinymath @ 0.2.0
License: Apache 2
Built: 2018-03-26T20:02:05.848Z
*/(function(a,b){'object'==typeof exports&&'undefined'!=typeof module?b(exports):'function'==typeof define&&define.amd?define(['exports'],b):b(a.tinymath={})})(this,function(a){'use strict';function b(a,c,d,e){this.message=a,this.expected=c,this.found=d,this.location=e,this.name='SyntaxError','function'==typeof Error.captureStackTrace&&Error.captureStackTrace(this,b)}function c(a,c){function d(){return a.substring(xa,wa)}function e(a,b){return{type:'literal',text:a,ignoreCase:b}}function f(a,b,c){return{type:'class',parts:a,inverted:b,ignoreCase:c}}function g(a){return{type:'other',description:a}}function h(b){var c,d=ya[b];if(d)return d;for(c=b-1;!ya[c];)c--;for(d=ya[c],d={line:d.line,column:d.column};c<b;)10===a.charCodeAt(c)?(d.line++,d.column=1):d.column++,c++;return ya[b]=d,d}function i(a,b){var c=h(a),d=h(b);return{start:{offset:a,line:c.line,column:c.column},end:{offset:b,line:d.line,column:d.column}}}function j(a){wa<za||(wa>za&&(za=wa,Aa=[]),Aa.push(a))}function k(){var a;return a=l(),a}function l(){var b,c,d,e,f,g,h;if(b=wa,c=s(),c===B)wa=b,b=B;else if(d=m(),d!==B){for(e=[],f=wa,43===a.charCodeAt(wa)?(g=E,wa++):(g=B,0===Ba&&j(F)),g===B&&(45===a.charCodeAt(wa)?(g=G,wa++):(g=B,0===Ba&&j(H))),g===B?(wa=f,f=B):(h=m(),h===B?(wa=f,f=B):(g=[g,h],f=g));f!==B;)e.push(f),f=wa,43===a.charCodeAt(wa)?(g=E,wa++):(g=B,0===Ba&&j(F)),g===B&&(45===a.charCodeAt(wa)?(g=G,wa++):(g=B,0===Ba&&j(H))),g===B?(wa=f,f=B):(h=m(),h===B?(wa=f,f=B):(g=[g,h],f=g));e===B?(wa=b,b=B):(f=s(),f===B?(wa=b,b=B):(xa=b,c=I(d,e),b=c))}else wa=b,b=B;return b}function m(){var b,c,d,e,f,g,h;if(b=wa,c=s(),c===B)wa=b,b=B;else if(d=n(),d!==B){for(e=[],f=wa,42===a.charCodeAt(wa)?(g=J,wa++):(g=B,0===Ba&&j(K)),g===B&&(47===a.charCodeAt(wa)?(g=L,wa++):(g=B,0===Ba&&j(M))),g===B?(wa=f,f=B):(h=n(),h===B?(wa=f,f=B):(g=[g,h],f=g));f!==B;)e.push(f),f=wa,42===a.charCodeAt(wa)?(g=J,wa++):(g=B,0===Ba&&j(K)),g===B&&(47===a.charCodeAt(wa)?(g=L,wa++):(g=B,0===Ba&&j(M))),g===B?(wa=f,f=B):(h=n(),h===B?(wa=f,f=B):(g=[g,h],f=g));e===B?(wa=b,b=B):(f=s(),f===B?(wa=b,b=B):(xa=b,c=N(d,e),b=c))}else wa=b,b=B;return b}function n(){var a;return a=o(),a===B&&(a=q(),a===B&&(a=r())),a}function o(){var b,c,d,e,f,g,h,i;return b=wa,c=s(),c===B?(wa=b,b=B):(40===a.charCodeAt(wa)?(d=O,wa++):(d=B,0===Ba&&j(P)),d===B?(wa=b,b=B):(e=s(),e===B?(wa=b,b=B):(f=l(),f===B?(wa=b,b=B):(g=s(),g===B?(wa=b,b=B):(41===a.charCodeAt(wa)?(h=Q,wa++):(h=B,0===Ba&&j(R)),h===B?(wa=b,b=B):(i=s(),i===B?(wa=b,b=B):(xa=b,c=S(f),b=c))))))),b}function p(){var b,c,d,e,f,g,h,i,k;if(Ba++,b=wa,c=s(),c===B)wa=b,b=B;else if(d=l(),d!==B){for(e=[],f=wa,g=s(),g===B?(wa=f,f=B):(44===a.charCodeAt(wa)?(h=U,wa++):(h=B,0===Ba&&j(V)),h===B?(wa=f,f=B):(i=s(),i===B?(wa=f,f=B):(k=l(),k===B?(wa=f,f=B):(xa=f,g=W(d,k),f=g))));f!==B;)e.push(f),f=wa,g=s(),g===B?(wa=f,f=B):(44===a.charCodeAt(wa)?(h=U,wa++):(h=B,0===Ba&&j(V)),h===B?(wa=f,f=B):(i=s(),i===B?(wa=f,f=B):(k=l(),k===B?(wa=f,f=B):(xa=f,g=W(d,k),f=g))));e===B?(wa=b,b=B):(f=s(),f===B?(wa=b,b=B):(44===a.charCodeAt(wa)?(g=U,wa++):(g=B,0===Ba&&j(V)),g===B&&(g=null),g===B?(wa=b,b=B):(h=s(),h===B?(wa=b,b=B):(xa=b,c=X(d,e),b=c))))}else wa=b,b=B;return Ba--,b===B&&(c=B,0===Ba&&j(T)),b}function q(){var b,c,d,e,f,g,h,i,k;if(Ba++,b=wa,c=s(),c!==B){if(d=[],Z.test(a.charAt(wa))?(e=a.charAt(wa),wa++):(e=B,0===Ba&&j($)),e!==B)for(;e!==B;)d.push(e),Z.test(a.charAt(wa))?(e=a.charAt(wa),wa++):(e=B,0===Ba&&j($));else d=B;d===B?(wa=b,b=B):(40===a.charCodeAt(wa)?(e=O,wa++):(e=B,0===Ba&&j(P)),e===B?(wa=b,b=B):(f=s(),f===B?(wa=b,b=B):(g=p(),g===B&&(g=null),g===B?(wa=b,b=B):(h=s(),h===B?(wa=b,b=B):(41===a.charCodeAt(wa)?(i=Q,wa++):(i=B,0===Ba&&j(R)),i===B?(wa=b,b=B):(k=s(),k===B?(wa=b,b=B):(xa=b,c=_(d,g),b=c)))))))}else wa=b,b=B;return Ba--,b===B&&(c=B,0===Ba&&j(Y)),b}function r(){var a,b,c,d;return Ba++,a=wa,b=s(),b===B?(wa=a,a=B):(c=u(),c===B&&(c=t()),c===B?(wa=a,a=B):(d=s(),d===B?(wa=a,a=B):(xa=a,b=ba(c),a=b))),Ba--,a===B&&(b=B,0===Ba&&j(aa)),a}function s(){var b,c;for(Ba++,b=[],da.test(a.charAt(wa))?(c=a.charAt(wa),wa++):(c=B,0===Ba&&j(ea));c!==B;)b.push(c),da.test(a.charAt(wa))?(c=a.charAt(wa),wa++):(c=B,0===Ba&&j(ea));return Ba--,b===B&&(c=B,0===Ba&&j(ca)),b}function t(){var b,c,d,e,f;if(b=wa,c=s(),c===B)wa=b,b=B;else if(fa.test(a.charAt(wa))?(d=a.charAt(wa),wa++):(d=B,0===Ba&&j(ga)),d!==B){for(e=[],ha.test(a.charAt(wa))?(f=a.charAt(wa),wa++):(f=B,0===Ba&&j(ia));f!==B;)e.push(f),ha.test(a.charAt(wa))?(f=a.charAt(wa),wa++):(f=B,0===Ba&&j(ia));e===B?(wa=b,b=B):(f=s(),f===B?(wa=b,b=B):(xa=b,c=ja(d,e),b=c))}else wa=b,b=B;return b}function u(){var b,c,d,e,f;return Ba++,b=wa,45===a.charCodeAt(wa)?(c=G,wa++):(c=B,0===Ba&&j(H)),c===B&&(c=null),c===B?(wa=b,b=B):(d=y(),d===B?(wa=b,b=B):(e=x(),e===B&&(e=null),e===B?(wa=b,b=B):(f=w(),f===B&&(f=null),f===B?(wa=b,b=B):(xa=b,c=la(),b=c)))),Ba--,b===B&&(c=B,0===Ba&&j(ka)),b}function v(){var b;return ma.test(a.charAt(wa))?(b=a.charAt(wa),wa++):(b=B,0===Ba&&j(na)),b}function w(){var b,c,d,e,f;if(b=wa,c=v(),c===B)wa=b,b=B;else if(45===a.charCodeAt(wa)?(d=G,wa++):(d=B,0===Ba&&j(H)),d===B&&(d=null),d!==B){if(e=[],f=z(),f!==B)for(;f!==B;)e.push(f),f=z();else e=B;e===B?(wa=b,b=B):(c=[c,d,e],b=c)}else wa=b,b=B;return b}function x(){var b,c,d,e;if(b=wa,46===a.charCodeAt(wa)?(c=oa,wa++):(c=B,0===Ba&&j(pa)),c!==B){if(d=[],e=z(),e!==B)for(;e!==B;)d.push(e),e=z();else d=B;d===B?(wa=b,b=B):(c=[c,d],b=c)}else wa=b,b=B;return b}function y(){var b,c,d,e;if(48===a.charCodeAt(wa)?(b=qa,wa++):(b=B,0===Ba&&j(ra)),b===B)if(b=wa,sa.test(a.charAt(wa))?(c=a.charAt(wa),wa++):(c=B,0===Ba&&j(ta)),c!==B){for(d=[],e=z();e!==B;)d.push(e),e=z();d===B?(wa=b,b=B):(c=[c,d],b=c)}else wa=b,b=B;return b}function z(){var b;return ua.test(a.charAt(wa))?(b=a.charAt(wa),wa++):(b=B,0===Ba&&j(va)),b}c=void 0===c?{}:c;var A,B={},C={start:k},D=k,E='+',F=e('+',!1),G='-',H=e('-',!1),I=function(a,b){return b.reduce(function(a,b){return{name:'+'===b[0]?'add':'subtract',args:[a,b[1]]}},a)},J='*',K=e('*',!1),L='/',M=e('/',!1),N=function(a,b){return b.reduce(function(a,b){return{name:'*'===b[0]?'multiply':'divide',args:[a,b[1]]}},a)},O='(',P=e('(',!1),Q=')',R=e(')',!1),S=function(a){return a},T=g('arguments'),U=',',V=e(',',!1),W=function(a,b){return b},X=function(a,b){return[a].concat(b)},Y=g('function'),Z=/^[a-z]/,$=f([['a','z']],!1,!1),_=function(a,b){return{name:a.join(''),args:b||[]}},aa=g('literal'),ba=function(a){return a},ca=g('whitespace'),da=/^[ \t\n\r]/,ea=f([' ','\t','\n','\r'],!1,!1),fa=/^[A-Za-z_@.\-]/,ga=f([['A','Z'],['a','z'],'_','@','.','-'],!1,!1),ha=/^[0-9A-Za-z._@\-]/,ia=f([['0','9'],['A','Z'],['a','z'],'.','_','@','-'],!1,!1),ja=function(a,b){return[a].concat(b).join('')},ka=g('number'),la=function(){return parseFloat(d())},ma=/^[eE]/,na=f(['e','E'],!1,!1),oa='.',pa=e('.',!1),qa='0',ra=e('0',!1),sa=/^[1-9]/,ta=f([['1','9']],!1,!1),ua=/^[0-9]/,va=f([['0','9']],!1,!1),wa=0,xa=0,ya=[{line:1,column:1}],za=0,Aa=[],Ba=0;if('startRule'in c){if(!(c.startRule in C))throw new Error('Can\'t start parsing from rule "'+c.startRule+'".');D=C[c.startRule]}if(A=D(),A!==B&&wa===a.length)return A;throw A!==B&&wa<a.length&&j(function(){return{type:'end'}}()),function(a,c,d){return new b(b.buildMessage(a,c),a,c,d)}(Aa,za<a.length?a.charAt(za):null,za<a.length?i(za,za+1):i(za,za))}function d(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return 1===b.length?Array.isArray(b[0])?b[0].reduce(function(a,b){return a+b}):b[0]:b.reduce(function(a,b){if(Array.isArray(a)&&Array.isArray(b)){if(b.length!==a.length)throw new Error('Array length mismatch');return a.map(function(a,c){return a+b[c]})}return Array.isArray(a)?a.map(function(a){return a+b}):Array.isArray(b)?b.map(function(b){return b+a}):a+b})}function e(b){if(Array.isArray(b))return b.length;throw new Error('Must pass an array')}function f(b){return e(b)}function g(c,d){if(null==d)throw new Error('Missing exponent');return Array.isArray(c)?c.map(function(b){return u(b,d)}):u(c,d)}function h(b){return Array.isArray(b)?b[0]:b}function i(b){return Array.isArray(b)?b[b.length-1]:b}function j(c,d){var b=Math.log;if(null==d)return Array.isArray(c)?c.map(function(c){return b(c)}):b(c);if(0>=d)throw new Error('Base out of range');return Array.isArray(c)?c.map(function(c){return b(c)/b(d)}):b(c)/b(d)}function k(){for(var a=Math.max,b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return 1===c.length?Array.isArray(c[0])?c[0].reduce(function(b,c){return a(b,c)}):c[0]:c.reduce(function(b,c){if(Array.isArray(b)&&Array.isArray(c)){if(c.length!==b.length)throw new Error('Array length mismatch');return b.map(function(b,d){return a(b,c[d])})}return Array.isArray(b)?b.map(function(b){return a(b,c)}):Array.isArray(c)?c.map(function(c){return a(c,b)}):a(b,c)})}function l(a,b){var c=a[b].length;return a[b].map(function(b,d){return a.map(function(a){if(Array.isArray(a)){if(a.length!==c)throw new Error('Array length mismatch');return a[d]}return a})})}function m(){for(var a=Math.min,b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return 1===c.length?Array.isArray(c[0])?c[0].reduce(function(b,c){return a(b,c)}):c[0]:c.reduce(function(b,c){if(Array.isArray(b)&&Array.isArray(c)){if(c.length!==b.length)throw new Error('Array length mismatch');return b.map(function(b,d){return a(b,c[d])})}return Array.isArray(b)?b.map(function(b){return a(b,c)}):Array.isArray(c)?c.map(function(c){return a(c,b)}):a(b,c)})}function n(c,d){if(Array.isArray(c)&&Array.isArray(d)){if(c.length!==d.length)throw new Error('Array length mismatch');return c.map(function(a,b){return a-d[b]})}return Array.isArray(c)?c.map(function(b){return b-d}):Array.isArray(d)?d.map(function(a){return c-a}):c-d}function o(b){return Array.isArray(b)?b.filter(function(a,c){return b.indexOf(a)===c}).length:1}function p(a,b){if(null==a)throw new Error('Missing expression');if('string'!=typeof a)throw new Error('Expression must be a string');try{return w(a,b)}catch(a){throw new Error('Failed to parse expression. '+a.message)}}function q(a,b,c){function d(a){var c=r(a);if('function'===c)return e(a);if('string'===c){if('undefined'==typeof b[a])throw new Error('Unknown variable: '+a);return b[a]}return a}function e(a){var b=a.name,c=a.args,e=f[b];if(!e)throw new Error('No such function: '+b);var g=c.map(d);return e.skipNumberValidation||s(g)?e.apply(void 0,E(g)):NaN}var f=Object.assign({},C,c);return d(a)}function r(a){var b='undefined'==typeof a?'undefined':D(a);if('object'===b){var c=Object.keys(a);if(2!==c.length||!a.name||!a.args)throw new Error('Invalid AST object');return'function'}if('string'===b||'number'===b)return b;throw new Error('Unknown AST property type: '+b)}function s(a){return a.every(function(a){return Array.isArray(a)?s(a):'number'==typeof a&&!isNaN(a)})}var t=Math.floor,u=Math.pow,v=Math.ceil;(function(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c})(b,Error),b.buildMessage=function(a,b){function c(a){return a.charCodeAt(0).toString(16).toUpperCase()}function d(a){return a.replace(/\\/g,'\\\\').replace(/"/g,'\\"').replace(/\0/g,'\\0').replace(/\t/g,'\\t').replace(/\n/g,'\\n').replace(/\r/g,'\\r').replace(/[\x00-\x0F]/g,function(a){return'\\x0'+c(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(a){return'\\x'+c(a)})}function e(a){return a.replace(/\\/g,'\\\\').replace(/\]/g,'\\]').replace(/\^/g,'\\^').replace(/-/g,'\\-').replace(/\0/g,'\\0').replace(/\t/g,'\\t').replace(/\n/g,'\\n').replace(/\r/g,'\\r').replace(/[\x00-\x0F]/g,function(a){return'\\x0'+c(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(a){return'\\x'+c(a)})}function f(a){return g[a.type](a)}var g={literal:function(a){return'"'+d(a.text)+'"'},class:function(a){var b,c='';for(b=0;b<a.parts.length;b++)c+=a.parts[b]instanceof Array?e(a.parts[b][0])+'-'+e(a.parts[b][1]):e(a.parts[b]);return'['+(a.inverted?'^':'')+c+']'},any:function(){return'any character'},end:function(){return'end of input'},other:function(a){return a.description}};return'Expected '+function(a){var b,c,d=Array(a.length);for(b=0;b<a.length;b++)d[b]=f(a[b]);if(d.sort(),0<d.length){for(b=1,c=1;b<d.length;b++)d[b-1]!==d[b]&&(d[c]=d[b],c++);d.length=c}switch(d.length){case 1:return d[0];case 2:return d[0]+' or '+d[1];default:return d.slice(0,-1).join(', ')+', or '+d[d.length-1];}}(a)+' but '+function(a){return a?'"'+d(a)+'"':'end of input'}(b)+' found.'};var w={SyntaxError:b,parse:c}.parse;e.skipNumberValidation=!0,f.skipNumberValidation=!0,h.skipNumberValidation=!0;var x=function(b){return 0<b?t(b):v(b)};i.skipNumberValidation=!0;var y=function(b){var a=b.length,c=t(a/2);return b.sort(function(c,a){return c>a}),0==a%2?(b[c]+b[c-1])/2:b[c]},z=function(b){var a=0,c={};return b.map(function(b){void 0===c[b]&&(c[b]=0),c[b]+=1,c[b]>a&&(a=c[b])}),Object.keys(c).filter(function(b){return c[b]===a}).map(function(a){return parseFloat(a)}).sort(function(c,a){return c-a})},A=function(c,a){return Math.round(c*u(10,a))/u(10,a)},B=function(a,b){return a+b};o.skipNumberValidation=!0;var C={abs:function(b){var c=Math.abs;return Array.isArray(b)?b.map(function(b){return c(b)}):c(b)},add:d,cbrt:function(b){var c=Math.cbrt;return Array.isArray(b)?b.map(function(b){return c(b)}):c(b)},ceil:function(b){return Array.isArray(b)?b.map(function(b){return v(b)}):v(b)},count:f,cube:function(b){return g(b,3)},divide:function(c,d){if(Array.isArray(c)&&Array.isArray(d)){if(c.length!==d.length)throw new Error('Array length mismatch');return c.map(function(a,b){if(0===d[b])throw new Error('Cannot divide by 0');return a/d[b]})}if(Array.isArray(d))return d.map(function(a){return c/a});if(0===d)throw new Error('Cannot divide by 0');return Array.isArray(c)?c.map(function(b){return b/d}):c/d},exp:function(b){var c=Math.exp;return Array.isArray(b)?b.map(function(b){return c(b)}):c(b)},first:h,fix:function(b){return Array.isArray(b)?b.map(function(b){return x(b)}):x(b)},floor:function(b){return Array.isArray(b)?b.map(function(b){return t(b)}):t(b)},last:i,log:j,log10:function(b){return j(b,10)},max:k,mean:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];if(1===b.length)return Array.isArray(b[0])?d(b[0])/b[0].length:b[0];var e=d.apply(void 0,b);return Array.isArray(e)?e.map(function(a){return a/b.length}):e/b.length},median:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];if(1===b.length)return Array.isArray(b[0])?y(b[0]):b[0];var d=b.findIndex(function(a){return Array.isArray(a)});if(-1!==d){var e=l(b,d);return e.map(function(a){return y(a)})}return y(b)},min:m,mod:function(c,d){if(Array.isArray(c)&&Array.isArray(d)){if(c.length!==d.length)throw new Error('Array length mismatch');return c.map(function(a,b){if(0===d[b])throw new Error('Cannot divide by 0');return a%d[b]})}if(Array.isArray(d))return d.map(function(a){return c%a});if(0===d)throw new Error('Cannot divide by 0');return Array.isArray(c)?c.map(function(b){return b%d}):c%d},mode:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];if(1===b.length)return Array.isArray(b[0])?z(b[0]):b[0];var d=b.findIndex(function(a){return Array.isArray(a)});if(-1!==d){var e=l(b,d);return e.map(function(a){return z(a)})}return z(b)},multiply:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return b.reduce(function(a,b){if(Array.isArray(a)&&Array.isArray(b)){if(b.length!==a.length)throw new Error('Array length mismatch');return a.map(function(a,c){return a*b[c]})}return Array.isArray(a)?a.map(function(a){return a*b}):Array.isArray(b)?b.map(function(b){return b*a}):a*b})},pow:g,random:function(c,a){if(null==c)return Math.random();if(null==a){if(0>c)throw new Error('Min is be greater than max');return Math.random()*c}if(c>a)throw new Error('Min is be greater than max');return Math.random()*(a-c)+c},range:function(){return n(k.apply(void 0,arguments),m.apply(void 0,arguments))},round:function(c){var d=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0;return Array.isArray(c)?c.map(function(b){return A(b,d)}):A(c,d)},size:e,sqrt:function(b){var c=Math.sqrt;if(Array.isArray(b))return b.map(function(b){if(0>b)throw new Error('Unable find the square root of a negative number');return c(b)});if(0>b)throw new Error('Unable find the square root of a negative number');return c(b)},square:function(b){return g(b,2)},subtract:n,sum:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return b.reduce(function(a,b){return Array.isArray(b)?a+b.reduce(B,0):a+b},0)},unique:o},D='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a},E=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)};a.parse=p,a.evaluate=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return b=b||{},q(p(a),b,c)},a.interpret=q,Object.defineProperty(a,'__esModule',{value:!0})});
//# sourceMappingURL=tinymath.min.js.map
